/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

!function(){var e,t,n;!function(o){function i(e,t){var n,o,i,r,a,u,s,c,l,f,d=t&&t.split("/"),v=w.map,p=v&&v["*"]||{};if(e&&"."===e.charAt(0)&&t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),c=0;c<e.length;c+=1)if(f=e[c],"."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((d||p)&&v){for(n=e.split("/"),c=n.length;c>0;c-=1){if(o=n.slice(0,c).join("/"),d)for(l=d.length;l>0;l-=1)if(i=v[d.slice(0,l).join("/")],i&&(i=i[o])){r=i,a=c;break}if(r)break;!u&&p&&p[o]&&(u=p[o],s=c)}!r&&u&&(r=u,a=s),r&&(n.splice(0,a,r),e=n.join("/"))}return e}function r(e,t){return function(){return v.apply(o,b.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return i(t,e)}}function u(e){return function(t){m[e]=t}}function s(e){if(h.hasOwnProperty(e)){var t=h[e];delete h[e],y[e]=!0,d.apply(o,t)}if(!m.hasOwnProperty(e)&&!y.hasOwnProperty(e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(t,n,o){e.onResourceLoad&&t&&e.onResourceLoad({defined:n},{id:t},o)}function f(e){return function(){return w&&w.config&&w.config[e]||{}}}var d,v,p,g,m={},h={},w={},y={},b=[].slice;p=function(e,t){var n,o=c(e),r=o[0];return e=o[1],r&&(r=i(r,t),n=s(r)),r?e=n&&n.normalize?n.normalize(e,a(t)):i(e,t):(e=i(e,t),o=c(e),r=o[0],e=o[1],r&&(n=s(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return r(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:f(e)}}},d=function(e,t,n,i){var a,c,f,d,v,w,b=[];if(i=i||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,v=0;v<t.length;v+=1)if(d=p(t[v],i),c=d.f,"require"===c)b[v]=g.require(e);else if("exports"===c)b[v]=g.exports(e),w=!0;else if("module"===c)a=b[v]=g.module(e);else if(m.hasOwnProperty(c)||h.hasOwnProperty(c)||y.hasOwnProperty(c))b[v]=s(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,r(i,!0),u(c),{}),b[v]=m[c]}f=n.apply(m[e],b),e&&(a&&a.exports!==o&&a.exports!==m[e]?m[e]=a.exports:f===o&&w||(m[e]=f))}else e&&(m[e]=n);l(e,m,b)},e=t=v=function(e,t,n,i,r){return"string"==typeof e?g[e]?g[e](t):s(p(e,t).f):(e.splice||(w=e,t.splice?(e=t,t=n,n=null):e=o),t=t||function(){},"function"==typeof n&&(n=i,i=r),i?d(o,e,t,n):setTimeout(function(){d(o,e,t,n)},15),v)},v.config=function(e){return w=e,v},n=function(e,t,n){t.splice||(n=t,t=[]),h[e]=[e,t,n]},n.amd={jQuery:!0}}(),n("durandal/amd/almond-custom",function(){}),n("durandal/system",["require"],function(t){var n,o=!1,i=Object.keys,r=Object.prototype.hasOwnProperty,a=Object.prototype.toString,u=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(s){u=!0}t.on&&t.on("moduleLoaded",function(e,t){n.setModuleId(e,t)}),"undefined"!=typeof e&&(e.onResourceLoad=function(e,t){n.setModuleId(e.defined[t.id],t.id)});var c=function(){},l=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments));else Function.prototype.bind&&!u||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}catch(t){}};return n={version:"1.2.0",noop:c,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},debug:function(e){return 1!=arguments.length?o:(o=e,o?(this.log=l,this.log("Debug mode enabled.")):(this.log("Debug mode disabled."),this.log=c),void 0)},isArray:function(e){return"[object Array]"===a.call(e)},log:c,defer:function(e){return $.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},acquire:function(){var e=Array.prototype.slice.call(arguments,0);return this.defer(function(n){t(e,function(){var e=arguments;setTimeout(function(){n.resolve.apply(n,e)},1)})}).promise()}},n.keys=i||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)r.call(e,n)&&(t[t.length]=n);return t},n}),n("durandal/viewEngine",["./system"],function(e){var t;return t=$.parseHTML?function(e){return $.parseHTML(e)}:function(e){return $(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:function(e){var n=t(e);if(1==n.length)return n[0];for(var o=[],i=0;i<n.length;i++){var r=n[i];if(8!=r.nodeType){if(3==r.nodeType){var a=/\S/.test(r.nodeValue);if(!a)continue}o.push(r)}}return o.length>1?$(o).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):o[0]},createView:function(t){var n=this,o=this.convertViewIdToRequirePath(t);return e.defer(function(i){e.acquire(o).then(function(e){var o=n.parseMarkup(e);o.setAttribute("data-view",t),i.resolve(o)})}).promise()}}}),n("durandal/viewLocator",["./system","./viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=o.getAttribute("data-view");if(i==t)return o}}function o(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var i=new RegExp(o(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(i,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n){var o;if(t.getView&&(o=t.getView()))return this.locateView(o,null,n);if(t.viewUrl)return this.locateView(t.viewUrl,null,n);var i=e.getModuleId(t);return i?this.locateView(this.convertModuleIdToViewId(i),null,n):this.locateView(this.determineFallbackViewId(t),null,n)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),o=n&&n.length>1?n[1]:"";return"views/"+o},translateViewIdToArea:function(e){return e},locateView:function(o,i,r){if("string"==typeof o){var a;if(a=t.isViewUrl(o)?t.convertViewUrlToViewId(o):o,i&&(a=this.translateViewIdToArea(a,i)),r){var u=n(r,a);if(u)return e.defer(function(e){e.resolve(u)}).promise()}return t.createView(a)}return e.defer(function(e){e.resolve(o)}).promise()}}}),n("durandal/viewModelBinder",["./system"],function(e){function t(t,r,a){if(!r||!t){if(n.throwOnErrors)throw new Error(o);return e.log(o,r,t),void 0}if(!r.getAttribute){if(n.throwOnErrors)throw new Error(i);return e.log(i,r,t),void 0}var u=r.getAttribute("data-view");try{e.log("Binding",u,t),n.beforeBind(t,r),a(),n.afterBind(t,r)}catch(s){if(n.throwOnErrors)throw new Error(s.message+";\nView: "+u+";\nModuleId: "+e.getModuleId(t));e.log(s.message,u,t)}}var n,o="Insufficient Information to Bind",i="Unexpected View Type";return n={beforeBind:e.noop,afterBind:e.noop,bindContext:function(e,n,o){o&&(e=e.createChildContext(o)),t(e,n,function(){o&&o.beforeBind&&o.beforeBind(n),ko.applyBindings(e,n),o&&o.afterBind&&o.afterBind(n)})},bind:function(e,n){t(e,n,function(){e.beforeBind&&e.beforeBind(n),ko.applyBindings(e,n),e.afterBind&&e.afterBind(n)})}}}),n("durandal/viewModel",["./system"],function(e){function t(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=u.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=u.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=u.defaults.afterDeactivate),e.interpretResponse||(e.interpretResponse=u.defaults.interpretResponse),e.areSameItem||(e.areSameItem=u.defaults.areSameItem),e}function n(t,n,o,i,r){if(t&&t.deactivate){e.log("Deactivating",t);var a;try{a=t.deactivate(n)}catch(u){return e.log(u),i.resolve(!1),void 0}a&&a.then?a.then(function(){o.afterDeactivate(t,n,r),i.resolve(!0)},function(t){e.log(t),i.resolve(!1)}):(o.afterDeactivate(t,n,r),i.resolve(!0))}else t&&o.afterDeactivate(t,n,r),i.resolve(!0)}function o(t,n,o,i){if(t)if(t.activate){e.log("Activating",t);var r;try{r=t.activate(i)}catch(a){return e.log(a),o(!1),void 0}r&&r.then?r.then(function(){n(t),o(!0)},function(t){e.log(t),o(!1)}):(n(t),o(!0))}else n(t),o(!0);else o(!0)}function i(t,n,o){return e.defer(function(i){if(t&&t.canDeactivate){var r;try{r=t.canDeactivate(n)}catch(a){return e.log(a),i.resolve(!1),void 0}r.then?r.then(function(e){i.resolve(o.interpretResponse(e))},function(t){e.log(t),i.resolve(!1)}):i.resolve(o.interpretResponse(r))}else i.resolve(!0)}).promise()}function r(t,n,o,i){return e.defer(function(r){if(t==n())return r.resolve(!0),void 0;if(t&&t.canActivate){var a;try{a=t.canActivate(i)}catch(u){return e.log(u),r.resolve(!1),void 0}a.then?a.then(function(e){r.resolve(o.interpretResponse(e))},function(t){e.log(t),r.resolve(!1)}):r.resolve(o.interpretResponse(a))}else r.resolve(!0)}).promise()}function a(a,u){var s=ko.observable(null);u=t(u);var c=ko.computed({read:function(){return s()},write:function(e){c.viaSetter=!0,c.activateItem(e)}});return c.settings=u,u.activator=c,c.isActivating=ko.observable(!1),c.canDeactivateItem=function(e,t){return i(e,t,u)},c.deactivateItem=function(t,o){return e.defer(function(e){c.canDeactivateItem(t,o).then(function(i){i?n(t,o,u,e,s):(c.notifySubscribers(),e.resolve(!1))})}).promise()},c.canActivateItem=function(e,t){return r(e,s,u,t)},c.activateItem=function(t,i){var r=c.viaSetter;return c.viaSetter=!1,e.defer(function(a){if(c.isActivating())return a.resolve(!1),void 0;c.isActivating(!0);var l=s();return u.areSameItem(l,t,i)?(c.isActivating(!1),a.resolve(!0),void 0):(c.canDeactivateItem(l,u.closeOnDeactivate).then(function(f){f?c.canActivateItem(t,i).then(function(f){f?e.defer(function(e){n(l,u.closeOnDeactivate,u,e)}).promise().then(function(){t=u.beforeActivate(t,i),o(t,s,function(e){c.isActivating(!1),a.resolve(e)},i)}):(r&&c.notifySubscribers(),c.isActivating(!1),a.resolve(!1))}):(r&&c.notifySubscribers(),c.isActivating(!1),a.resolve(!1))}),void 0)}).promise()},c.canActivate=function(){var e;return a?(e=a,a=!1):e=c(),c.canActivateItem(e)},c.activate=function(){var e;return a?(e=a,a=!1):e=c(),c.activateItem(e)},c.canDeactivate=function(e){return c.canDeactivateItem(c(),e)},c.deactivate=function(e){return c.deactivateItem(c(),e)},c.includeIn=function(e){e.canActivate=function(){return c.canActivate()},e.activate=function(){return c.activate()},e.canDeactivate=function(e){return c.canDeactivate(e)},e.deactivate=function(e){return c.deactivate(e)}},u.includeIn?c.includeIn(u.includeIn):a&&c.activate(),c.forItems=function(t){u.closeOnDeactivate=!1,u.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},u.beforeActivate=function(e){var n=c();if(e){var o=t.indexOf(e);-1==o?t.push(e):e=t()[o]}else e=u.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},u.afterDeactivate=function(e,n){n&&t.remove(e)};var n=c.canDeactivate;c.canDeactivate=function(o){return o?e.defer(function(e){function n(){for(var t=0;t<r.length;t++)if(!r[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var i=t(),r=[],a=0;a<i.length;a++)c.canDeactivateItem(i[a],o).then(function(e){r.push(e),r.length==i.length&&n()})}).promise():n()};var o=c.deactivate;return c.deactivate=function(n){return n?e.defer(function(e){function o(o){c.deactivateItem(o,n).then(function(){r++,t.remove(o),r==a&&e.resolve()})}for(var i=t(),r=0,a=i.length,u=0;a>u;u++)o(i[u])}).promise():o()},c},c}var u;return u={defaults:{closeOnDeactivate:!0,interpretResponse:function(e){if("string"==typeof e){var t=e.toLowerCase();return"yes"==t||"ok"==t}return e},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}},activator:a}}),n("durandal/composition",["./viewLocator","./viewModelBinder","./viewEngine","./system","./viewModel"],function(e,t,n,o,i){function r(e){return e.model&&e.model.activate&&(d.activateDuringComposition&&void 0==e.activate||e.activate)}function a(e,t){r(e)?i.activator().activateItem(e.model).then(function(e){e&&t()}):t()}function u(e){for(var t=[],n={childElements:t,activeView:null},o=ko.virtualElements.firstChild(e);o;)1==o.nodeType&&(t.push(o),o.getAttribute(f)&&(n.activeView=o)),o=ko.virtualElements.nextSibling(o);return n}function s(e,t,n){n.activeView&&n.activeView.removeAttribute(f),t&&(n.model&&n.model.viewAttached&&(n.composingNewView||n.alwaysAttachView)&&n.model.viewAttached(t),t.setAttribute(f,!0)),n.afterCompose&&n.afterCompose(e,t,n)}function c(e,t){if("string"==typeof t.transition){if(t.activeView){if(t.activeView==e)return!1;if(!e)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),o=e.getAttribute("data-view");return n!=o}}return!0}return!1}var l={},f="data-active-view",d={activateDuringComposition:!1,convertTransitionToModuleId:function(e){return"durandal/transitions/"+e},switchContent:function(e,t,n){if(n.transition=n.transition||this.defaultTransitionName,c(t,n)){var i=this.convertTransitionToModuleId(n.transition);o.acquire(i).then(function(o){n.transition=o,o(e,t,n).then(function(){s(e,t,n)})})}else t!=n.activeView&&(n.cacheViews&&n.activeView&&$(n.activeView).css("display","none"),t?n.cacheViews?n.composingNewView?(n.viewElements.push(t),ko.virtualElements.prepend(e,t)):$(t).css("display",""):(ko.virtualElements.emptyNode(e),ko.virtualElements.prepend(e,t)):n.cacheViews||ko.virtualElements.emptyNode(e)),s(e,t,n)},bindAndShow:function(e,o,i){i.composingNewView=i.cacheViews?-1==ko.utils.arrayIndexOf(i.viewElements,o):!0,a(i,function(){if(i.beforeBind&&i.beforeBind(e,o,i),i.preserveContext&&i.bindingContext)i.composingNewView&&t.bindContext(i.bindingContext,o,i.model);else if(o){var r=i.model||l,a=ko.dataFor(o);if(a!=r){if(!i.composingNewView)return $(o).remove(),n.createView(o.getAttribute("data-view")).then(function(t){d.bindAndShow(e,t,i)}),void 0;t.bind(r,o)}}d.switchContent(e,o,i)})},defaultStrategy:function(t){return e.locateViewForObject(t.model,t.viewElements)},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;var n=o.getModuleId(t);if(n)return{model:t};for(var i in t)t[i]=ko.utils.unwrapObservable(t[i]);return t},executeStrategy:function(e,t){t.strategy(t).then(function(n){d.bindAndShow(e,n,t)})},inject:function(t,n){return n.model?n.view?(e.locateView(n.view,n.area,n.viewElements).then(function(e){d.bindAndShow(t,e,n)}),void 0):((void 0===n.view||n.view)&&(n.strategy||(n.strategy=this.defaultStrategy),"string"==typeof n.strategy?o.acquire(n.strategy).then(function(e){n.strategy=e,d.executeStrategy(t,n)}):this.executeStrategy(t,n)),void 0):(this.bindAndShow(t,null,n),void 0)},compose:function(t,i,r){"string"==typeof i&&(i=n.isViewUrl(i)?{view:i}:{model:i});var a=o.getModuleId(i);a&&(i={model:i});var s=u(t);i.bindingContext=r,i.activeView=s.activeView,i.cacheViews&&!i.viewElements&&(i.viewElements=s.childElements),i.model?"string"==typeof i.model?o.acquire(i.model).then(function(e){i.model="function"==typeof e?new e(t,i):e,d.inject(t,i)}):d.inject(t,i):i.view?(i.area=i.area||"partial",i.preserveContext=!0,e.locateView(i.view,i.area,i.viewElements).then(function(e){d.bindAndShow(t,e,i)})):this.bindAndShow(t,null,i)}};return ko.bindingHandlers.compose={update:function(e,t,n,o,i){var r=d.getSettings(t);d.compose(e,r,i)}},ko.virtualElements.allowedBindings.compose=!0,d}),n("durandal/widget",["./system","./composition"],function(e,t){var n="data-part",o="["+n+"]",i={},r={},a=["model","view","kind"],u={getParts:function(t){var i={};e.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var a=t[r];if(a.getAttribute){var u=a.getAttribute(n);u&&(i[u]=a);for(var s=$(o,a),c=0;c<s.length;c++){var l=s.get(c);i[l.getAttribute(n)]=l}}}return i},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;for(var n in t)t[n]=-1!=ko.utils.arrayIndexOf(a,n)?ko.utils.unwrapObservable(t[n]):t[n];return t},registerKind:function(e){ko.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,o,i,r){var a=u.getSettings(n);a.kind=e,u.create(t,a,r)}},ko.virtualElements.allowedBindings[e]=!0},mapKind:function(e,t,n){t&&(r[e]=t),n&&(i[e]=n)},convertKindToModuleId:function(e){return i[e]||"durandal/widgets/"+e+"/controller"},convertKindToViewId:function(e){return r[e]||"durandal/widgets/"+e+"/view"},beforeBind:function(e,t){var n=u.getParts(e),o=u.getParts(t);for(var i in n)$(o[i]).replaceWith(n[i])},createCompositionSettings:function(e){return e.model||(e.model=this.convertKindToModuleId(e.kind)),e.view||(e.view=this.convertKindToViewId(e.kind)),e.preserveContext=!0,e.beforeBind=this.beforeBind,e},create:function(e,n,o){"string"==typeof n&&(n={kind:n});var i=u.createCompositionSettings(n);t.compose(e,i,o)}};return ko.bindingHandlers.widget={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,o,i){var r=u.getSettings(t);u.create(e,r,i)}},ko.virtualElements.allowedBindings.widget=!0,u}),n("durandal/modalDialog",["./composition","./system","./viewModel"],function(e,t,n){function o(e){return t.defer(function(n){"string"==typeof e?t.acquire(e).then(function(e){"function"==typeof e?n.resolve(new e):n.resolve(e)}):n.resolve(e)}).promise()}var i={},r=0,a={currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isModalOpen:function(){return r>0},getContext:function(e){return i[e||"default"]},addContext:function(e,t){t.name=e,i[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1};return t.afterCompose&&(n.afterCompose=t.afterCompose),n},show:function(a,u,s){var c=this,l=i[s||"default"];return t.defer(function(t){o(a).then(function(o){var i=n.activator();i.activateItem(o,u).then(function(n){if(n){var a=o.modal={owner:o,context:l,activator:i,close:function(){var e=arguments;i.deactivateItem(o,!0).then(function(n){n&&(r--,l.removeHost(a),delete o.modal,t.resolve.apply(t,e))})}};a.settings=c.createCompositionSettings(o,l),l.addHost(a),r++,e.compose(a.host,a.settings)}else t.resolve(!1)})})}).promise()}};return a.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=$("body"),n=$('<div class="modalBlockout"></div>').css({"z-index":a.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),o=$('<div class="modalHost"></div>').css({"z-index":a.getNextZIndex()}).appendTo(t);if(e.host=o.get(0),e.blockout=n.get(0),!a.isModalOpen()){e.oldBodyMarginRight=$("body").css("margin-right");var i=$("html"),r=t.outerWidth(!0),u=i.scrollTop();$("html").css("overflow-y","hidden");var s=$("body").outerWidth(!0);t.css("margin-right",s-r+parseInt(e.oldBodyMarginRight)+"px"),i.scrollTop(u),$("#simplemodal-overlay").css("width",s+"px")}},removeHost:function(e){if($(e.host).css("opacity",0),$(e.blockout).css("opacity",0),setTimeout(function(){$(e.host).remove(),$(e.blockout).remove()},this.removeDelay),!a.isModalOpen()){var t=$("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),$("body").css("margin-right",e.oldBodyMarginRight)}},afterCompose:function(e,t,n){var o=$(t),i=o.width(),r=o.height();o.css({"margin-top":(-r/2).toString()+"px","margin-left":(-i/2).toString()+"px"}),$(n.model.modal.host).css("opacity",1),$(t).hasClass("autoclose")&&$(n.model.modal.blockout).click(function(){n.model.modal.close()}),$(".autofocus",t).each(function(){$(this).focus()})}}),a}),n("durandal/events",["./system"],function(e){var t=/\s+/,n=function(){},o=function(e,t){this.owner=e,this.events=t};return o.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},o.prototype.on=o.prototype.then,o.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,i){var r,a,u;if(n){for(r=this.callbacks||(this.callbacks={}),e=e.split(t);a=e.shift();)u=r[a]||(r[a]=[]),u.push(n,i);return this}return new o(this,e)},n.prototype.off=function(n,o,i){var r,a,u,s;if(!(a=this.callbacks))return this;if(!(n||o||i))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(a);r=n.shift();)if((u=a[r])&&(o||i))for(s=u.length-2;s>=0;s-=2)o&&u[s]!==o||i&&u[s+1]!==i||u.splice(s,2);else delete a[r];return this},n.prototype.trigger=function(e){var n,o,i,r,a,u,s,c;if(!(o=this.callbacks))return this;for(c=[],e=e.split(t),r=1,a=arguments.length;a>r;r++)c[r-1]=arguments[r];for(;n=e.shift();){if((s=o.all)&&(s=s.slice()),(i=o[n])&&(i=i.slice()),i)for(r=0,a=i.length;a>r;r+=2)i[r].apply(i[r+1]||this,c);if(s)for(u=[n].concat(c),r=0,a=s.length;a>r;r+=2)s[r].apply(s[r+1]||this,u)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),n("durandal/app",["./system","./viewEngine","./composition","./widget","./modalDialog","./events"],function(e,t,n,o,i,r){var a={title:"Application",showModal:function(e,t,n){return i.show(e,t,n)},showMessage:function(e,t,n){return i.show("./messageBox",{message:e,title:t||this.title,options:n})},start:function(){var t=this;return t.title&&(document.title=t.title),e.defer(function(t){$(function(){e.log("Starting Application"),t.resolve(),e.log("Started Application")})}).promise()},setRoot:function(e,o,i){var r,a={activate:!0,transition:o};r=i&&"string"!=typeof i?i:document.getElementById(i||"applicationHost"),"string"==typeof e?t.isViewUrl(e)?a.view=e:a.model=e:a.model=e,n.compose(r,a)},adaptToDevice:function(){document.ontouchmove=function(e){e.preventDefault()}}};return r.includeIn(a),a}),n("durandal/http",[],function(){return{defaultJSONPCallbackParam:"callback",get:function(e,t){return $.ajax(e,{data:t})},jsonp:function(e,t,n){return-1==e.indexOf("=?")&&(n=n||this.defaultJSONPCallbackParam,e+=-1==e.indexOf("?")?"?":"&",e+=n+"=?"),$.ajax({url:e,dataType:"jsonp",data:t})},post:function(e,t){return $.ajax({url:e,data:ko.toJSON(t),type:"POST",contentType:"application/json",dataType:"json"})}}}),n("text",["module"],function(e){var n,o,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,s=u&&location.protocol&&location.protocol.replace(/\:/,""),c=u&&location.hostname,l=u&&(location.port||void 0),f=[],d=e.config&&e.config()||{};return n={version:"2.0.3",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=i[t];try{e=new ActiveXObject(n)}catch(o){}if(e){i=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),o=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),-1!==n&&(t=i.substring(n+1,i.length),t="strip"===t,i=i.substring(0,n)),{moduleName:o,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,o,i){var r,a,u,s=n.xdRegExp.exec(e);return s?(r=s[2],a=s[3],a=a.split(":"),u=a[1],a=a[0],!(r&&r!==t||a&&a.toLowerCase()!==o.toLowerCase()||(u||a)&&u!==i)):!0},finishLoad:function(e,t,o,i){o=t?n.strip(o):o,d.isBuild&&(f[e]=o),i(o)},load:function(e,t,o,i){if(i.isBuild&&!i.inlineText)return o(),void 0;d.isBuild=i.isBuild;var r=n.parseName(e),a=r.moduleName+"."+r.ext,f=t.toUrl(a),v=d.useXhr||n.useXhr;!u||v(f,s,c,l)?n.get(f,function(t){n.finishLoad(e,r.strip,t,o)},function(e){o.error&&o.error(e)}):t([a],function(e){n.finishLoad(r.moduleName+"."+r.ext,r.strip,e,o)})},write:function(e,t,o){if(f.hasOwnProperty(t)){var i=n.jsEscape(f[t]);o.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,o,i,r){var a=n.parseName(t),u=a.moduleName+"."+a.ext,s=o.toUrl(a.moduleName+"."+a.ext)+".js";n.load(u,o,function(){var t=function(e){return i(s,e)};t.asModule=function(e,t){return i.asModule(e,s,t)},n.write(e,u,t,r)},r)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(o=t.nodeRequire("fs"),n.get=function(e,t){var n=o.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}):"xhr"===d.env||!d.env&&n.createXhr()?n.get=function(e,t,o){var i=n.createXhr();i.open("GET",e,!0),d.onXhr&&d.onXhr(i,e),i.onreadystatechange=function(){var n,r;4===i.readyState&&(n=i.status,n>399&&600>n?(r=new Error(e+" HTTP status: "+n),r.xhr=i,o(r)):t(i.responseText))},i.send(null)}:("rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(n.get=function(e,t){var n,o,i="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),i)),s="";try{for(n=new java.lang.StringBuffer,o=u.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),n.append(o);null!==(o=u.readLine());)n.append(a),n.append(o);s=String(n.toString())}finally{u.close()}t(s)}),n}),n("text!durandal/messageBox.html",[],function(){return'<div class="messageBox">\r\n    <div class="modal-header">\r\n        <h3 data-bind="html: title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="html: message"></p>\r\n    </div>\r\n    <div class="modal-footer" data-bind="foreach: options">\r\n        <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>\r\n    </div>\r\n</div>'}),n("durandal/messageBox",[],function(){var e=function(t,n,o){this.message=t,this.title=n||e.defaultTitle,this.options=o||e.defaultOptions};return e.prototype.selectOption=function(e){this.modal.close(e)},e.prototype.activate=function(t){t&&(this.message=t.message,this.title=t.title||e.defaultTitle,this.options=t.options||e.defaultOptions)},e.defaultTitle="Application",e.defaultOptions=["Ok"],e}),n("durandal/plugins/router",["../system","../viewModel","../app"],function(e,t,n){function o(t){S(!1),e.log("Redirecting"),h.navigateTo(t)}function i(){V=!0,e.log("Cancelling Navigation"),w&&m.setLocation(w),V=!1,S(!1);var t=m.last_location[1].split("#/")[1];w||!t?R():t!=b?window.location.replace("#/"+b):R()}function r(e,t,n){C(e),h.onNavigationComplete(e,t,n),y=n,w=m.last_location[1].replace("/",""),R()}function a(t,n,o){e.log("Activating Route",t,o,n),O.activateItem(o,n).then(function(e){e?r(t,n,o):i()})}function u(){return V||m.last_location[1].replace("/","")==w}function s(e,t,n){var r=h.guardRoute(e,t,n);r?r.then?r.then(function(r){r?"string"==typeof r?o(r):a(e,t,n):i()}):"string"==typeof r?o(r):a(e,t,n):i()}function c(){if(!S()){var t=M.shift();M=[],t&&(S(!0),e.acquire(t.routeInfo.moduleId).then(function(e){t.params.routeInfo=t.routeInfo,t.params.router=h;var n=h.getActivatableInstance(t.routeInfo,t.params,e);h.guardRoute?s(t.routeInfo,t.params,n):a(t.routeInfo,t.params,n)}))}}function l(e,t){M.unshift({routeInfo:e,params:t}),c()}function f(e,t){var n=I[e];if(!u()){if(!n){if(!h.autoConvertRouteToModuleId)return h.handleInvalidRoute(e,t),void 0;n={moduleId:h.autoConvertRouteToModuleId(e,t),name:h.convertRouteToName(e)}}l(n,t)}}function d(){f(b,this.params||{})}function v(){f(this.app.last_route.path.toString(),this.params||{})}function p(){var e,t=this.params||{};if(h.autoConvertRouteToModuleId){var n=this.path.split("#/");if(2==n.length){var o=n[1].split("/");return e=o[0],t.splat=o.splice(1),f(e,t),void 0}}h.handleInvalidRoute(this.app.last_location[1],t)}function g(e){return h.prepareRouteInfo(e),I[e.url.toString()]=e,k.push(e),e.visible&&(e.isActive=ko.computed(function(){return T()&&O()&&O().__moduleId__==e.moduleId}),A.push(e)),e}var m,h,w,y,b,x,I={},k=ko.observableArray([]),A=ko.observableArray([]),T=ko.observable(!1),S=ko.observable(!1),V=!1,O=t.activator(),C=ko.observable(),M=[],R=function(){R=e.noop,T(!0),h.dfd.resolve(),delete h.dfd};return O.settings.areSameItem=function(){return!1},h={ready:T,allRoutes:k,visibleRoutes:A,isNavigating:S,activeItem:O,activeRoute:C,afterCompose:function(){setTimeout(function(){S(!1),c()},10)},getActivatableInstance:function(e,t,n){return"function"==typeof n?new n:n},useConvention:function(e){e=null==e?"viewmodels":e,e&&(e+="/"),h.convertRouteToModuleId=function(t){return e+h.stripParameter(t)}},stripParameter:function(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)},handleInvalidRoute:function(t,n){e.log("No Route Found",t,n)},onNavigationComplete:function(e){document.title=n.title?e.caption+" | "+n.title:e.caption},navigateBack:function(){window.history.back()},navigateTo:function(e,t){switch(t=t||"trigger",t.toLowerCase()){case"skip":x=e,m.setLocation(e);break;case"replace":window.location.replace(e);break;default:m.lookupRoute("get",e)?m.setLocation(e):window.location.href=e}},replaceLocation:function(e){this.navigateTo(e,"replace")},convertRouteToName:function(e){var t=h.stripParameter(e);return t.substring(0,1).toUpperCase()+t.substring(1)},convertRouteToModuleId:function(e){return h.stripParameter(e)},prepareRouteInfo:function(e){e.url instanceof RegExp||(e.name=e.name||h.convertRouteToName(e.url),e.moduleId=e.moduleId||h.convertRouteToModuleId(e.url),e.hash=e.hash||"#/"+e.url),e.caption=e.caption||e.name,e.settings=e.settings||{}},mapAuto:function(e){e=e||"viewmodels",e+="/",h.autoConvertRouteToModuleId=function(t){return e+h.stripParameter(t)}},mapNav:function(e,t,n){return"string"==typeof e?this.mapRoute(e,t,n,!0):(e.visible=!0,g(e))},mapRoute:function(e,t,n,o){return"string"==typeof e?g({url:e,moduleId:t,name:n,visible:o}):g(e)},map:function(t){if(!e.isArray(t))return g(t);for(var n=[],o=0;o<t.length;o++)n.push(g(t[o]));return n},activate:function(t){return e.defer(function(n){var o;h.dfd=n,b=t,m=Sammy(function(e){for(var t=k(),n=0;n<t.length;n++){var i=t[n];e.get(i.url,v),o=this.routes.get[n],I[o.path.toString()]=i}e.get("#/",d),e.get(/\#\/(.*)/,p)}),m._checkFormSubmission=function(){return!1},m.before(null,function(e){if(x){if(e.path==="/"+x)return x=null,!1;throw new Error("Expected to skip url '"+x+"', but found url '"+e.path+"'")}return!0}),m.log=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Sammy"),e.log.apply(e,t)},m.run("#/")}).promise()}}}),e.config({jQuery:!0,paths:{text:"durandal/amd/text"}}),n("main",["durandal/app","durandal/viewLocator","durandal/system","durandal/plugins/router"],function(e,t,n,o){e.title="Touch it",e.start().then(function(){t.useConvention(),o.map("home"),e.adaptToDevice(),e.setRoot("viewmodels/shell")})}),n("viewmodels/home",[],function(){return{notes:ko.observable([{title:"Notes #1",content:"Content Note #1"},{title:"Notes #2",content:"Content Note #2"},{title:"Notes #3",content:"Content Note #3"},{title:"Notes #4",content:"Content Note #4"},{title:"Notes #5",content:"Content Note #5"}])}}),n("viewmodels/shell",["durandal/plugins/router","durandal/app"],function(e,t){return{router:e,isNavigating:e.isNavigating,search:function(){t.showMessage("Search not yet implemented...")
},activate:function(){return e.activate("home")}}}),n("text!views/home.html",[],function(){return'<section id="home">\r\n    <ul data-bind="foreach: notes">\r\n        <li>\r\n            <h4 data-bind="text: title"></h4>\r\n            <p data-bind="html: content"></p>\r\n        </li>\r\n    </ul>\r\n</section>'}),n("text!views/shell.html",[],function(){return'<div>\r\n    <h1>Titre du site</h1>\r\n    <div class="loading-base" data-bind="visible: isNavigating">Chargement ../</div>\r\n    <div id="main">\r\n        <!--ko compose: { \r\n            model: router.activeItem,           //wiring the router\r\n            afterCompose: router.afterCompose,  //wiring the router\r\n            cacheViews:true                     //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models)\r\n        }--><!--/ko-->\r\n    </div>\r\n</div>'}),t(["main"])}();